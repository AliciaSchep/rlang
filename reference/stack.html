<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Call stack information — stack • rlang</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Call stack information — stack" />
<meta property="og:description" content="
The eval_ and call_ families of functions provide a replacement
for the base R functions prefixed with sys. (which are all about
the context stack), as well as for parent.frame() (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9005</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/06/rlang-0-4-0/">Version 0.4.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/01/rlang-0-3-1/">Version 0.3.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Call stack information</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/lifecycle-retired.R'><code>R/lifecycle-retired.R</code></a></small>
    <div class="hidden name"><code>stack.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><img src='figures/lifecycle-deprecated.svg' alt='Deprecated lifecycle' /></p>
<p>The <code>eval_</code> and <code>call_</code> families of functions provide a replacement
for the base R functions prefixed with <code>sys.</code> (which are all about
the context stack), as well as for <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame()</a></code> (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous.</p>
    </div>

    <pre class="usage"><span class='fu'>global_frame</span>()

<span class='fu'>current_frame</span>()

<span class='fu'>ctxt_frame</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'>call_frame</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>ctxt_depth</span>()

<span class='fu'>call_depth</span>()

<span class='fu'>ctxt_stack</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>call_stack</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>The number of frames to go back in the stack.</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>Whether to post-process the call stack to clean
non-standard frames. If <code>TRUE</code>, suboptimal call-stack entries by
<code><a href='https://rdrr.io/r/base/eval.html'>base::eval()</a></code> will be cleaned up: the duplicate frame created by
<code><a href='https://rdrr.io/r/base/eval.html'>eval()</a></code> is eliminated.</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>The number of layers of intervening frames to trim off
the stack. See <code><a href='stack_trim.html'>stack_trim()</a></code> and examples.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>ctxt_frame()</code> and <code>call_frame()</code> return a <code>frame</code> object
containing the following fields: <code>expr</code> and <code>env</code> (call expression
and evaluation environment), <code>pos</code> and <code>caller_pos</code> (position of
current frame in the context stack and position of the caller), and
<code>fun</code> (function of the current frame). <code>ctxt_stack()</code> and
<code>call_stack()</code> return a list of all context or call frames on the
stack. Finally, <code>ctxt_depth()</code> and <code>call_depth()</code> report the
current context position or the number of calling frames on the
stack.</p>
<p>The base R functions take two sorts of arguments to indicate which
frame to query: <code>which</code> and <code>n</code>. The <code>n</code> argument is
straightforward: it's the number of frames to go down the stack,
with <code>n = 1</code> referring to the current context. The <code>which</code> argument
is more complicated and changes meaning for values lower than 1.
For the sake of consistency, the rlang functions all take the
same kind of argument <code>n</code>. This argument has a single meaning (the
number of frames to go down the stack) and cannot be lower than 1.</p>
<p>Note finally that <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame(1)</a></code> corresponds to
<code>call_frame(2)$env</code>, as <code>n = 1</code> always refers to the current
frame. This makes the <code>_frame()</code> and <code>_stack()</code> functions
consistent: <code>ctxt_frame(2)</code> is the same as <code>ctxt_stack()[[2]]</code>.
Also, <code>ctxt_depth()</code> returns one more frame than
<code><a href='https://rdrr.io/r/base/sys.parent.html'>base::sys.nframe()</a></code> because it counts the global frame. That is
consistent with the <code>_stack()</code> functions which return the global
frame as well. This way, <code>call_stack(call_depth())</code> is the same as
<code>global_frame()</code>.</p>
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    


<p>These functions are soft-deprecated and replaced by <code><a href='trace_back.html'>trace_back()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Expressions within arguments count as contexts</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>ctxt_depth</span>())) <span class='co'># returns 2</span></div><div class='output co'>#&gt; <span class='warning'>Warning: `ctxt_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 36</div><div class='input'>
<span class='co'># But they are not part of the call stack because arguments are</span>
<span class='co'># evaluated within the calling function (or the global environment</span>
<span class='co'># if called at top level)</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>call_depth</span>())) <span class='co'># returns 0</span></div><div class='output co'>#&gt; <span class='warning'>Warning: `call_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 13</div><div class='input'>
<span class='co'># The context stacks includes all intervening execution frames. The</span>
<span class='co'># call stack doesn't:</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='no'>x</span>)
<span class='fu'>f</span>(<span class='fu'>f</span>(<span class='fu'>ctxt_stack</span>()))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: identity(x)
#&gt; env:  [local 0x924b288]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 36&gt; (33)
#&gt; expr: f(ctxt_stack())
#&gt; env:  [local 0x924b3a0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: identity(x)
#&gt; env:  [local 0x924b4b8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: f(f(ctxt_stack()))
#&gt; env:  [local 0x924b5d0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x924b790]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x924b9c0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x924bf70]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x924c4e8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x924c830]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x9248d48]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x9249410]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x9249640]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x92497c8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x92498a8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x98f4820]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span>(<span class='fu'>f</span>(<span class='fu'>call_stack</span>()))</div><div class='output co'>#&gt; <span class='warning'>Warning: `call_stack()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x8bc1198]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>cmd</span>) <span class='fu'>cmd</span>()
<span class='fu'>f</span>(<span class='fu'>g</span>(<span class='no'>ctxt_stack</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 36&gt; (33)
#&gt; expr: g(ctxt_stack)
#&gt; env:  [local 0x8d6b8c8]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: identity(x)
#&gt; env:  [local 0x8d6ba18]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: f(g(ctxt_stack))
#&gt; env:  [local 0x8d6bb30]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x8d6bcf0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x8d6bf20]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x8d6c4d0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x8d68c50]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x8d68f98]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x8d692e0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x8d699a8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x8d69bd8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x8d69d60]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x8d69e40]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x8d5a188]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span>(<span class='fu'>g</span>(<span class='no'>call_stack</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 36&gt; (32)
#&gt; expr: g(call_stack)
#&gt; env:  [local 0x628db10]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x6fac140]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='co'># The rlang _stack() functions return a list of frame</span>
<span class='co'># objects. Use purrr::transpose() or index a field with</span>
<span class='co'># purrr::map()'s to extract a particular field from a stack:</span>

<span class='co'># stack &lt;- f(f(call_stack()))</span>
<span class='co'># purrr::map(stack, "env")</span>
<span class='co'># purrr::transpose(stack)$expr</span>

<span class='co'># current_frame() is an alias for ctxt_frame(1)</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>() <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>current</span> <span class='kw'>=</span> <span class='fu'>current_frame</span>(), <span class='kw'>first</span> <span class='kw'>=</span> <span class='fu'>ctxt_frame</span>(<span class='fl'>1</span>))
<span class='fu'>fn</span>()</div><div class='output co'>#&gt; <span class='warning'>Warning: `current_frame()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; $current
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: fn()
#&gt; env:  [local 0x4e51fb0]
#&gt; 
#&gt; $first
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: fn()
#&gt; env:  [local 0x4e51fb0]
#&gt; </div><div class='input'>
<span class='co'># While current_frame() is the top of the stack, global_frame() is</span>
<span class='co'># the bottom:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>() {
  <span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>ctxt_depth</span>()
  <span class='fu'>ctxt_frame</span>(<span class='no'>n</span>)
}
<span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='fu'>fn</span>(), <span class='fu'>global_frame</span>())</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>

<span class='co'># ctxt_stack() returns a stack with all intervening frames. You can</span>
<span class='co'># trim layers of intervening frames with the trim argument:</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>ctxt_stack</span>()))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 35&gt; (33)
#&gt; expr: identity(ctxt_stack())
#&gt; env:  [local 0x5fa3e58]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: identity(identity(ctxt_stack()))
#&gt; env:  [local 0x5fa3cd0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x5fa3b10]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x5fa38e0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x5fa8830]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x5fa82b8]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x5fa7f70]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x5fa7c28]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x5fa7560]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x5fa7330]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x5fa71a8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x5fa70c8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x6012b08]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>ctxt_stack</span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>1</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x54a79a8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x54a7548]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x54a69e8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x54ddd20]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x54e14c0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x54e0e30]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x54e00a0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x54dfc40]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x54df930]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x54e35a0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x5627640]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># ctxt_stack() is called within fn() with intervening frames:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>trim</span>) <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>ctxt_stack</span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='no'>trim</span>)))
<span class='fu'>fn</span>(<span class='fl'>0</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 36&gt; (34)
#&gt; expr: identity(ctxt_stack(trim = trim))
#&gt; env:  [local 0x499c270]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: identity(identity(ctxt_stack(trim = trim)))
#&gt; env:  [local 0x499c158]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: fn(0)
#&gt; env:  [local 0x499c040]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x499be80]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x499bc50]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x499f4d0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x499ef58]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x499ec10]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x499e890]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x499e1c8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x499df98]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x499de10]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x499dd30]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x49b98a0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># We can trim the first layer of those:</span>
<span class='fu'>fn</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: fn(1)
#&gt; env:  [local 0x357a1b0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x3579ff0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x3579dc0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x3579500]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x357cd80]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x357ca38]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x357c6f0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x357bb20]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x357b8b8]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x357b6c0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x357b5e0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x358d538]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># The outside intervening frames (at the fn() call site) are still</span>
<span class='co'># returned, but can be trimmed as well:</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>fn</span>(<span class='fl'>1</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 36&gt; (33)
#&gt; expr: fn(1)
#&gt; env:  [local 0x1b9b088]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 35&gt; (33)
#&gt; expr: identity(fn(1))
#&gt; env:  [local 0x1b9af70]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: identity(identity(fn(1)))
#&gt; env:  [local 0x1b9ae58]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x1b9e668]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x1b9e438]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x1b9de18]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x1b9d868]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x1b9d4e8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x1b9d1a0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x1b9caa0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x1b9c838]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x21dc8c0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x21dc7e0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x21c91e8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>fn</span>(<span class='fl'>2</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x5e18668]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x5e18898]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x5e18e48]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x5e00d60]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x5e010a8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x5e013f0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x5e01ab8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x5e01ce8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x5e01e70]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x5e01f50]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x5d20158]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>trim</span>) <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span>(<span class='fu'>fn</span>(<span class='no'>trim</span>)))
<span class='fu'>g</span>(<span class='fl'>2</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 34&gt; (33)
#&gt; expr: g(2)
#&gt; env:  [local 0x4fa96f8]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x4fa98b8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x4fa9ae8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x4faa098]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x4fa67e0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x4fa6b28]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x4fa6e70]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x4fa7538]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x4fa7768]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x4fa78f0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x4fa79d0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x64bc5f0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>g</span>(<span class='fl'>3</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6863df0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 32&gt; (22)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x6721698]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 31&gt; (22)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x67218c8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 30&gt; (22)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x6721e78]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x67223f0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x6722738]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x671ec50]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x671f318]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x671f548]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 24&gt; (22)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x671f6d0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x671f7b0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x5eee510]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: evaluate::evaluate(x, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x92de2d8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x92e7dd0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x65d8b90]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x6ea2f20]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x1b22d60]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x5945038]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x5d2f518]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x3349128]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x333e558]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3085518]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3b0f358]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x3081470]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/Rtmp4B68tY/file4f26784478dc"),  &lt;...&gt;
#&gt; env:  [frame 0x30817f0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307c538]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3078d98]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x30790e0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3079498]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3079a48]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3079d90]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x307a0d8]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x307a810]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#life-cycle">Life cycle</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


