<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Call stack information — stack • rlang</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Call stack information — stack" />

<meta property="og:description" content="
The eval_ and call_ families of functions provide a replacement
for the base R functions prefixed with sys. (which are all about
the context stack), as well as for parent.frame() (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.99.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/01/rlang-0-3-1/">Version 0.3.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Call stack information</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/lifecycle-retired.R'><code>R/lifecycle-retired.R</code></a></small>
    <div class="hidden name"><code>stack.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><img src='figures/lifecycle-deprecated.svg' alt='Deprecated lifecycle' /></p>
<p>The <code>eval_</code> and <code>call_</code> families of functions provide a replacement
for the base R functions prefixed with <code>sys.</code> (which are all about
the context stack), as well as for <code><a href='https://www.rdocumentation.org/packages/base/topics/sys.parent'>parent.frame()</a></code> (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous.</p>
    
    </div>

    <pre class="usage"><span class='fu'>global_frame</span>()

<span class='fu'>current_frame</span>()

<span class='fu'>ctxt_frame</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'>call_frame</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>ctxt_depth</span>()

<span class='fu'>call_depth</span>()

<span class='fu'>ctxt_stack</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>call_stack</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>The number of frames to go back in the stack.</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>Whether to post-process the call stack to clean
non-standard frames. If <code>TRUE</code>, suboptimal call-stack entries by
<code><a href='https://www.rdocumentation.org/packages/base/topics/eval'>base::eval()</a></code> will be cleaned up: the duplicate frame created by
<code><a href='https://www.rdocumentation.org/packages/base/topics/eval'>eval()</a></code> is eliminated.</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>The number of layers of intervening frames to trim off
the stack. See <code><a href='stack_trim.html'>stack_trim()</a></code> and examples.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>ctxt_frame()</code> and <code>call_frame()</code> return a <code>frame</code> object
containing the following fields: <code>expr</code> and <code>env</code> (call expression
and evaluation environment), <code>pos</code> and <code>caller_pos</code> (position of
current frame in the context stack and position of the caller), and
<code>fun</code> (function of the current frame). <code>ctxt_stack()</code> and
<code>call_stack()</code> return a list of all context or call frames on the
stack. Finally, <code>ctxt_depth()</code> and <code>call_depth()</code> report the
current context position or the number of calling frames on the
stack.</p>
<p>The base R functions take two sorts of arguments to indicate which
frame to query: <code>which</code> and <code>n</code>. The <code>n</code> argument is
straightforward: it's the number of frames to go down the stack,
with <code>n = 1</code> referring to the current context. The <code>which</code> argument
is more complicated and changes meaning for values lower than 1.
For the sake of consistency, the rlang functions all take the
same kind of argument <code>n</code>. This argument has a single meaning (the
number of frames to go down the stack) and cannot be lower than 1.</p>
<p>Note finally that <code><a href='https://www.rdocumentation.org/packages/base/topics/sys.parent'>parent.frame(1)</a></code> corresponds to
<code>call_frame(2)$env</code>, as <code>n = 1</code> always refers to the current
frame. This makes the <code>_frame()</code> and <code>_stack()</code> functions
consistent: <code>ctxt_frame(2)</code> is the same as <code>ctxt_stack()[[2]]</code>.
Also, <code>ctxt_depth()</code> returns one more frame than
<code><a href='https://www.rdocumentation.org/packages/base/topics/sys.parent'>base::sys.nframe()</a></code> because it counts the global frame. That is
consistent with the <code>_stack()</code> functions which return the global
frame as well. This way, <code>call_stack(call_depth())</code> is the same as
<code>global_frame()</code>.</p>
    
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    
    <p>These functions are soft-deprecated and replaced by <code><a href='trace_back.html'>trace_back()</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Expressions within arguments count as contexts</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_depth</span>())) <span class='co'># returns 2</span></div><div class='output co'>#&gt; <span class='warning'>Warning: `ctxt_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 40</div><div class='input'>
<span class='co'># But they are not part of the call stack because arguments are</span>
<span class='co'># evaluated within the calling function (or the global environment</span>
<span class='co'># if called at top level)</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>call_depth</span>())) <span class='co'># returns 0</span></div><div class='output co'>#&gt; <span class='warning'>Warning: `call_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 14</div><div class='input'>
<span class='co'># The context stacks includes all intervening execution frames. The</span>
<span class='co'># call stack doesn't:</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='no'>x</span>)
<span class='fu'>f</span>(<span class='fu'>f</span>(<span class='fu'>ctxt_stack</span>()))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 41&gt; (40)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7938108]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 40&gt; (37)
#&gt; expr: f(ctxt_stack())
#&gt; env:  [local 0x7937ff0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 39&gt; (38)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7937ed8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: f(f(ctxt_stack()))
#&gt; env:  [local 0x7937d88]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7937bc8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7937998]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x79373e8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x793abf8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x793a5a0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x793a258]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7939b58]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7939880]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x79396f8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7939618]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7b3bd58]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[40]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[41]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[42]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span>(<span class='fu'>f</span>(<span class='fu'>call_stack</span>()))</div><div class='output co'>#&gt; <span class='warning'>Warning: `call_stack()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x5e4f880]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>cmd</span>) <span class='fu'>cmd</span>()
<span class='fu'>f</span>(<span class='fu'>g</span>(<span class='no'>ctxt_stack</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 40&gt; (37)
#&gt; expr: g(ctxt_stack)
#&gt; env:  [local 0x56167e0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 39&gt; (38)
#&gt; expr: identity(x)
#&gt; env:  [local 0x5616508]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: f(g(ctxt_stack))
#&gt; env:  [local 0x56163f0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x5616150]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x5615e08]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x5619a88]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x563eba8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x563e588]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x563e160]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x564aa90]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x564a860]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x564a630]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x564a400]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x572fe28]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[40]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[41]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span>(<span class='fu'>g</span>(<span class='no'>call_stack</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 40&gt; (36)
#&gt; expr: g(call_stack)
#&gt; env:  [local 0x19240d8]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x2d3e620]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='co'># The rlang _stack() functions return a list of frame</span>
<span class='co'># objects. Use purrr::transpose() or index a field with</span>
<span class='co'># purrr::map()'s to extract a particular field from a stack:</span>

<span class='co'># stack &lt;- f(f(call_stack()))</span>
<span class='co'># purrr::map(stack, "env")</span>
<span class='co'># purrr::transpose(stack)$expr</span>

<span class='co'># current_frame() is an alias for ctxt_frame(1)</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>() <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>current</span> <span class='kw'>=</span> <span class='fu'>current_frame</span>(), <span class='kw'>first</span> <span class='kw'>=</span> <span class='fu'>ctxt_frame</span>(<span class='fl'>1</span>))
<span class='fu'>fn</span>()</div><div class='output co'>#&gt; <span class='warning'>Warning: `current_frame()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; $current
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: fn()
#&gt; env:  [local 0x838ac88]
#&gt; 
#&gt; $first
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: fn()
#&gt; env:  [local 0x838ac88]
#&gt; </div><div class='input'>
<span class='co'># While current_frame() is the top of the stack, global_frame() is</span>
<span class='co'># the bottom:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>() {
  <span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>ctxt_depth</span>()
  <span class='fu'>ctxt_frame</span>(<span class='no'>n</span>)
}
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identical'>identical</a></span>(<span class='fu'>fn</span>(), <span class='fu'>global_frame</span>())</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>

<span class='co'># ctxt_stack() returns a stack with all intervening frames. You can</span>
<span class='co'># trim layers of intervening frames with the trim argument:</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_stack</span>()))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 39&gt; (37)
#&gt; expr: identity(ctxt_stack())
#&gt; env:  [local 0x8e161b0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: identity(identity(ctxt_stack()))
#&gt; env:  [local 0x8e162c8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x8e16488]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x8e166b8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x8e16c68]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x8e133b0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x8e136f8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x8e13a40]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x8e14108]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x8e14338]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x8e144c0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x8e145a0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x78e9fa0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[40]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_stack</span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>1</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7f386f8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7f384c8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7f37f18]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7f379a0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7f37658]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7f372d8]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7ce2930]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7ce2700]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7ce2578]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7ce2498]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7f7cbd8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># ctxt_stack() is called within fn() with intervening frames:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>trim</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_stack</span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='no'>trim</span>)))
<span class='fu'>fn</span>(<span class='fl'>0</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 40&gt; (38)
#&gt; expr: identity(ctxt_stack(trim = trim))
#&gt; env:  [local 0x82b7f10]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 39&gt; (38)
#&gt; expr: identity(identity(ctxt_stack(trim = trim)))
#&gt; env:  [local 0x82b7df8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: fn(0)
#&gt; env:  [local 0x82b7ce0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x82b7ae8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x82b78b8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x82b7308]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x82b6d90]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x82b6a48]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x82fa770]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x82fa038]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x82f9e08]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x82f9c80]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x82f9ba0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x83c9fc8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[40]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[41]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># We can trim the first layer of those:</span>
<span class='fu'>fn</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: fn(1)
#&gt; env:  [local 0x5b6ed28]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x5b6eb68]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x5b723b0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x5b70c10]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x5b783b0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x5b778c0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x5b76eb0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x5832a18]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x5832318]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x5831d30]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x5835620]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x50b2ec0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># The outside intervening frames (at the fn() call site) are still</span>
<span class='co'># returned, but can be trimmed as well:</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>fn</span>(<span class='fl'>1</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 40&gt; (37)
#&gt; expr: fn(1)
#&gt; env:  [local 0x4f51648]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 39&gt; (37)
#&gt; expr: identity(fn(1))
#&gt; env:  [local 0x4f53fe8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: identity(identity(fn(1)))
#&gt; env:  [local 0x4f52f80]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x4f553e0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x4f5a720]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x4f59bc0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x4f591e8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x4f58d88]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x4f58928]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x4f5be60]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x4f5bb88]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x4f5b990]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x4f5b840]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x5138638]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[40]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[41]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>fn</span>(<span class='fl'>2</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x2ef8ac8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x2ef8828]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x2ef80b8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x2dd3c80]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x2dd3820]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x2dd3468]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x2dd2cc0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x2dd29e8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x2dd2828]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x2dd2748]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x2dac420]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>trim</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>fn</span>(<span class='no'>trim</span>)))
<span class='fu'>g</span>(<span class='fl'>2</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 38&gt; (37)
#&gt; expr: g(2)
#&gt; env:  [local 0x8029ca0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x8029e60]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x802a090]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x802a640]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x8d5f038]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x8d5f380]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x8d5f6c8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x8d5fdc8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x8d603b0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x8d60538]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x8d60618]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x81809d0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>g</span>(<span class='fl'>3</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x740b070]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 36&gt; (26)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x91d60d0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 35&gt; (26)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x91d6530]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 34&gt; (26)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x91d2dc8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 33&gt; (32)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x91d3bc8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 32&gt; (31)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x91d41b0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x91d4568]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x9067200]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x9067430]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 28&gt; (26)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x90675f0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x90676d0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x909a000]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 25&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x83b1810]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: force(code)
#&gt; env:  [frame 0x83b5df8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: withr::with_options(list(crayon.enabled = getOption("crayon.enabled",  &lt;...&gt;
#&gt; env:  [frame 0x83bc140]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[1L]][[1L]], run = .l[[2L]][[1L]], show = .l[[3L]][[1L]],  &lt;...&gt;
#&gt; env:  [frame 0x83baa10]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x7d093a8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x805df68]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x3e84c48]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x881d298]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x198d960]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x48b2d18]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4bdc4d8]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x19009a0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x19cd388]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x321df80]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x321b110]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3218f50]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpMVh6Pm/file4d004ee8fc43"),  &lt;...&gt;
#&gt; env:  [frame 0x3219ce0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32188e8]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3215c70]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3215fb8]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x3216370]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3216920]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3216c68]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x3213180]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x32138f0]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#life-cycle">Life cycle</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

